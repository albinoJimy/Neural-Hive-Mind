# Namespaces iniciais do Neural Hive-Mind
# Organização por camadas arquiteturais

---
apiVersion: v1
kind: Namespace
metadata:
  name: neural-hive-system
  labels:
    name: neural-hive-system
    neuralhive/layer: system
    neuralhive/phase: foundation
    istio-injection: enabled
    neuralhive.ai/policy-enforcement: enabled
    pod-security.kubernetes.io/enforce: baseline
    pod-security.kubernetes.io/audit: baseline
    pod-security.kubernetes.io/warn: baseline
  annotations:
    neuralhive/description: "Namespace principal do sistema Neural Hive-Mind"
    neuralhive/owner: "platform-team"
    neuralhive/sla-tier: "critical"
    neuralhive/compliance: "lgpd,gdpr"

---
apiVersion: v1
kind: Namespace
metadata:
  name: neural-hive-cognition
  labels:
    name: neural-hive-cognition
    neuralhive/layer: cognitive
    neuralhive/phase: foundation
    istio-injection: enabled
    neuralhive.ai/policy-enforcement: enabled
    pod-security.kubernetes.io/enforce: restricted
    pod-security.kubernetes.io/audit: restricted
    pod-security.kubernetes.io/warn: restricted
  annotations:
    neuralhive/description: "Camada cognitiva - processamento e interpretação"
    neuralhive/owner: "ai-team"
    neuralhive/sla-tier: "high"
    neuralhive/compliance: "lgpd,gdpr"

---
apiVersion: v1
kind: Namespace
metadata:
  name: neural-hive-orchestration
  labels:
    name: neural-hive-orchestration
    neuralhive/layer: orchestration
    neuralhive/phase: foundation
    istio-injection: enabled
    neuralhive.ai/policy-enforcement: enabled
    pod-security.kubernetes.io/enforce: restricted
    pod-security.kubernetes.io/audit: restricted
    pod-security.kubernetes.io/warn: restricted
  annotations:
    neuralhive/description: "Camada de orquestração - coordenação e workflow"
    neuralhive/owner: "platform-team"
    neuralhive/sla-tier: "high"
    neuralhive/compliance: "lgpd,gdpr"

---
apiVersion: v1
kind: Namespace
metadata:
  name: neural-hive-execution
  labels:
    name: neural-hive-execution
    neuralhive/layer: execution
    neuralhive/phase: foundation
    istio-injection: enabled
    neuralhive.ai/policy-enforcement: enabled
    pod-security.kubernetes.io/enforce: restricted
    pod-security.kubernetes.io/audit: restricted
    pod-security.kubernetes.io/warn: restricted
  annotations:
    neuralhive/description: "Camada de execução - agentes e workers"
    neuralhive/owner: "execution-team"
    neuralhive/sla-tier: "critical"
    neuralhive/compliance: "lgpd,gdpr"

---
apiVersion: v1
kind: Namespace
metadata:
  name: neural-hive-observability
  labels:
    name: neural-hive-observability
    neuralhive/layer: observability
    neuralhive/phase: foundation
    istio-injection: enabled
    neuralhive.ai/policy-enforcement: enabled
    pod-security.kubernetes.io/enforce: baseline
    pod-security.kubernetes.io/audit: baseline
    pod-security.kubernetes.io/warn: baseline
  annotations:
    neuralhive/description: "Observabilidade - métricas, logs e tracing"
    neuralhive/owner: "sre-team"
    neuralhive/sla-tier: "medium"
    neuralhive/compliance: "lgpd"

---
# Namespaces de segurança e infraestrutura
apiVersion: v1
kind: Namespace
metadata:
  name: cosign-system
  labels:
    name: cosign-system
    neuralhive/layer: security
    neuralhive/phase: foundation
    istio-injection: disabled
    neuralhive.ai/policy-enforcement: enabled
    pod-security.kubernetes.io/enforce: baseline
    pod-security.kubernetes.io/audit: baseline
    pod-security.kubernetes.io/warn: baseline
  annotations:
    neuralhive/description: "Sigstore Policy Controller para validação de assinatura de imagens"
    neuralhive/owner: "security-team"
    neuralhive/sla-tier: "critical"
    neuralhive/compliance: "lgpd,gdpr"

---
apiVersion: v1
kind: Namespace
metadata:
  name: gatekeeper-system
  labels:
    name: gatekeeper-system
    neuralhive/layer: security
    neuralhive/phase: foundation
    istio-injection: disabled
    neuralhive.ai/policy-enforcement: enabled
    pod-security.kubernetes.io/enforce: baseline
    pod-security.kubernetes.io/audit: baseline
    pod-security.kubernetes.io/warn: baseline
  annotations:
    neuralhive/description: "OPA Gatekeeper para validação e mutação de recursos"
    neuralhive/owner: "security-team"
    neuralhive/sla-tier: "critical"
    neuralhive/compliance: "lgpd,gdpr"

---
apiVersion: v1
kind: Namespace
metadata:
  name: cert-manager
  labels:
    name: cert-manager
    neuralhive/layer: infrastructure
    neuralhive/phase: foundation
    istio-injection: disabled
    neuralhive.ai/policy-enforcement: enabled
    pod-security.kubernetes.io/enforce: baseline
    pod-security.kubernetes.io/audit: baseline
    pod-security.kubernetes.io/warn: baseline
  annotations:
    neuralhive/description: "Gerenciamento automático de certificados TLS"
    neuralhive/owner: "platform-team"
    neuralhive/sla-tier: "high"
    neuralhive/compliance: "lgpd"

---
apiVersion: v1
kind: Namespace
metadata:
  name: auth
  labels:
    name: auth
    neuralhive/layer: security
    neuralhive/phase: foundation
    istio-injection: enabled
    neuralhive.ai/policy-enforcement: enabled
    pod-security.kubernetes.io/enforce: baseline
    pod-security.kubernetes.io/audit: baseline
    pod-security.kubernetes.io/warn: baseline
  annotations:
    neuralhive/description: "Sistema de autenticação e autorização (Keycloak)"
    neuralhive/owner: "security-team"
    neuralhive/sla-tier: "critical"
    neuralhive/compliance: "lgpd,gdpr"

---
# ResourceQuotas para cada namespace (específicas por ambiente)
apiVersion: v1
kind: ResourceQuota
metadata:
  name: neural-hive-quota
  namespace: neural-hive-cognition
spec:
  hard:
    requests.cpu: "1"
    requests.memory: "2Gi"
    limits.cpu: "2"
    limits.memory: "4Gi"
    persistentvolumeclaims: "3"
    count/secrets: "50"
    count/configmaps: "50"
    count/services.loadbalancers: "5"
    services.nodeports: "0"
    # Custom Resource Quotas para Data Governance
    count/apiassets.catalog.neural-hive.io: "25"
    count/dataassets.catalog.neural-hive.io: "50"
    count/servicecontracts.catalog.neural-hive.io: "15"
    count/datalineages.catalog.neural-hive.io: "40"

---
apiVersion: v1
kind: ResourceQuota
metadata:
  name: neural-hive-quota
  namespace: neural-hive-orchestration
spec:
  hard:
    requests.cpu: "500m"
    requests.memory: "1Gi"
    limits.cpu: "1"
    limits.memory: "2Gi"
    persistentvolumeclaims: "2"
    count/secrets: "30"
    count/configmaps: "30"
    count/services.loadbalancers: "3"
    services.nodeports: "0"
    # Custom Resource Quotas para Data Governance
    count/apiassets.catalog.neural-hive.io: "25"
    count/dataassets.catalog.neural-hive.io: "50"
    count/servicecontracts.catalog.neural-hive.io: "15"
    count/datalineages.catalog.neural-hive.io: "40"

---
apiVersion: v1
kind: ResourceQuota
metadata:
  name: neural-hive-quota
  namespace: neural-hive-execution
spec:
  hard:
    requests.cpu: "2"
    requests.memory: "4Gi"
    limits.cpu: "4"
    limits.memory: "8Gi"
    persistentvolumeclaims: "5"
    count/secrets: "100"
    count/configmaps: "100"
    count/services.loadbalancers: "10"
    services.nodeports: "0"
    # Custom Resource Quotas para Data Governance
    count/apiassets.catalog.neural-hive.io: "25"
    count/dataassets.catalog.neural-hive.io: "50"
    count/servicecontracts.catalog.neural-hive.io: "15"
    count/datalineages.catalog.neural-hive.io: "40"

---
apiVersion: v1
kind: ResourceQuota
metadata:
  name: neural-hive-quota
  namespace: neural-hive-observability
spec:
  hard:
    requests.cpu: "500m"
    requests.memory: "1Gi"
    limits.cpu: "1"
    limits.memory: "2Gi"
    persistentvolumeclaims: "2"
    count/secrets: "20"
    count/configmaps: "20"
    count/services.loadbalancers: "2"
    services.nodeports: "0"
    # Custom Resource Quotas para Data Governance
    count/apiassets.catalog.neural-hive.io: "25"
    count/dataassets.catalog.neural-hive.io: "50"
    count/servicecontracts.catalog.neural-hive.io: "15"
    count/datalineages.catalog.neural-hive.io: "40"

---
apiVersion: v1
kind: ResourceQuota
metadata:
  name: security-quota
  namespace: cosign-system
spec:
  hard:
    requests.cpu: "250m"
    requests.memory: "512Mi"
    limits.cpu: "500m"
    limits.memory: "1Gi"
    persistentvolumeclaims: "2"
    count/secrets: "10"
    count/configmaps: "10"
    services.nodeports: "0"

---
apiVersion: v1
kind: ResourceQuota
metadata:
  name: security-quota
  namespace: gatekeeper-system
spec:
  hard:
    requests.cpu: "250m"
    requests.memory: "512Mi"
    limits.cpu: "500m"
    limits.memory: "1Gi"
    persistentvolumeclaims: "2"
    count/secrets: "10"
    count/configmaps: "10"
    services.nodeports: "0"

---
apiVersion: v1
kind: ResourceQuota
metadata:
  name: infrastructure-quota
  namespace: cert-manager
spec:
  hard:
    requests.cpu: "100m"
    requests.memory: "256Mi"
    limits.cpu: "250m"
    limits.memory: "512Mi"
    persistentvolumeclaims: "5"
    count/secrets: "100"
    count/configmaps: "20"
    services.nodeports: "0"

---
apiVersion: v1
kind: ResourceQuota
metadata:
  name: auth-quota
  namespace: auth
spec:
  hard:
    requests.cpu: "250m"
    requests.memory: "512Mi"
    limits.cpu: "500m"
    limits.memory: "1Gi"
    persistentvolumeclaims: "1"
    count/secrets: "50"
    count/configmaps: "30"
    count/services.loadbalancers: "2"
    services.nodeports: "0"

---
# LimitRanges para garantir QoS (específicos por ambiente e workload)
apiVersion: v1
kind: LimitRange
metadata:
  name: neural-hive-limits
  namespace: neural-hive-cognition
spec:
  limits:
  - default:
      cpu: "250m"
      memory: "512Mi"
      ephemeral-storage: "10Gi"
    defaultRequest:
      cpu: "50m"
      memory: "128Mi"
      ephemeral-storage: "1Gi"
    max:
      cpu: "1"
      memory: "2Gi"
    min:
      cpu: "50m"
      memory: "128Mi"
    type: Container
  - default:
      storage: "100Gi"
    max:
      storage: "500Gi"
    min:
      storage: "10Gi"
    type: PersistentVolumeClaim

---
apiVersion: v1
kind: LimitRange
metadata:
  name: neural-hive-limits
  namespace: neural-hive-orchestration
spec:
  limits:
  - default:
      cpu: "200m"
      memory: "256Mi"
      ephemeral-storage: "5Gi"
    defaultRequest:
      cpu: "50m"
      memory: "128Mi"
      ephemeral-storage: "500Mi"
    max:
      cpu: "500m"
      memory: "1Gi"
    min:
      cpu: "50m"
      memory: "128Mi"
    type: Container
  - default:
      storage: "50Gi"
    max:
      storage: "200Gi"
    min:
      storage: "5Gi"
    type: PersistentVolumeClaim

---
apiVersion: v1
kind: LimitRange
metadata:
  name: neural-hive-limits
  namespace: neural-hive-execution
spec:
  limits:
  - default:
      cpu: "500m"
      memory: "1Gi"
      ephemeral-storage: "20Gi"
    defaultRequest:
      cpu: "100m"
      memory: "256Mi"
      ephemeral-storage: "2Gi"
    max:
      cpu: "2"
      memory: "4Gi"
    min:
      cpu: "100m"
      memory: "256Mi"
    type: Container
  - default:
      storage: "200Gi"
    max:
      storage: "1Ti"
    min:
      storage: "20Gi"
    type: PersistentVolumeClaim

---
apiVersion: v1
kind: LimitRange
metadata:
  name: neural-hive-limits
  namespace: neural-hive-observability
spec:
  limits:
  - default:
      cpu: "100m"
      memory: "256Mi"
      ephemeral-storage: "10Gi"
    defaultRequest:
      cpu: "50m"
      memory: "128Mi"
      ephemeral-storage: "1Gi"
    max:
      cpu: "500m"
      memory: "1Gi"
    min:
      cpu: "50m"
      memory: "128Mi"
    type: Container
  - default:
      storage: "100Gi"
    max:
      storage: "500Gi"
    min:
      storage: "10Gi"
    type: PersistentVolumeClaim

---
apiVersion: v1
kind: LimitRange
metadata:
  name: security-limits
  namespace: cosign-system
spec:
  limits:
  - default:
      cpu: "500m"
      memory: "512Mi"
      ephemeral-storage: "2Gi"
    defaultRequest:
      cpu: "100m"
      memory: "128Mi"
      ephemeral-storage: "500Mi"
    max:
      cpu: "1"
      memory: "1Gi"
    min:
      cpu: "50m"
      memory: "64Mi"
    type: Container

---
apiVersion: v1
kind: LimitRange
metadata:
  name: security-limits
  namespace: gatekeeper-system
spec:
  limits:
  - default:
      cpu: "500m"
      memory: "512Mi"
      ephemeral-storage: "2Gi"
    defaultRequest:
      cpu: "100m"
      memory: "128Mi"
      ephemeral-storage: "500Mi"
    max:
      cpu: "2"
      memory: "2Gi"
    min:
      cpu: "50m"
      memory: "64Mi"
    type: Container

---
apiVersion: v1
kind: LimitRange
metadata:
  name: infrastructure-limits
  namespace: cert-manager
spec:
  limits:
  - default:
      cpu: "200m"
      memory: "256Mi"
      ephemeral-storage: "1Gi"
    defaultRequest:
      cpu: "50m"
      memory: "64Mi"
      ephemeral-storage: "200Mi"
    max:
      cpu: "500m"
      memory: "512Mi"
    min:
      cpu: "10m"
      memory: "32Mi"
    type: Container

---
apiVersion: v1
kind: LimitRange
metadata:
  name: auth-limits
  namespace: auth
spec:
  limits:
  - default:
      cpu: "200m"
      memory: "256Mi"
      ephemeral-storage: "5Gi"
    defaultRequest:
      cpu: "100m"
      memory: "256Mi"
      ephemeral-storage: "1Gi"
    max:
      cpu: "500m"
      memory: "1Gi"
    min:
      cpu: "100m"
      memory: "256Mi"
    type: Container
  - default:
      storage: "50Gi"
    max:
      storage: "200Gi"
    min:
      storage: "10Gi"
    type: PersistentVolumeClaim