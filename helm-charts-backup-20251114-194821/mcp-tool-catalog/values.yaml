replicaCount: 2

image:
  repository: neural-hive-mind/mcp-tool-catalog
  pullPolicy: IfNotPresent
  tag: "1.0.0"

service:
  type: ClusterIP
  httpPort: 8080
  metricsPort: 9091

resources:
  requests:
    cpu: 500m
    memory: 512Mi
  limits:
    cpu: 2000m
    memory: 2Gi

autoscaling:
  enabled: true
  minReplicas: 2
  maxReplicas: 10
  targetCPUUtilizationPercentage: 70
  targetMemoryUtilizationPercentage: 80

kafka:
  bootstrapServers: kafka-cluster-kafka-bootstrap:9092
  requestTopic: mcp.tool.selection.requests
  responseTopic: mcp.tool.selection.responses
  consumerGroupId: mcp-tool-catalog-group

mongodb:
  url: mongodb://mongodb-svc:27017
  database: mcp_tool_catalog
  toolsCollection: tools
  selectionsCollection: selections_history

redis:
  url: redis://redis-cluster:6379
  cacheTtl: 3600
  cacheEnabled: true

serviceRegistry:
  host: service-registry
  port: 8080
  heartbeatInterval: 30

geneticAlgorithm:
  populationSize: 50
  maxGenerations: 100
  crossoverProb: 0.7
  mutationProb: 0.2
  tournamentSize: 3
  convergenceThreshold: 0.01
  timeout: 30

toolExecution:
  timeout: 300
  maxConcurrent: 10
  retryMaxAttempts: 3

observability:
  otelEndpoint: http://otel-collector:4317
  logLevel: INFO
  logFormat: json

analystAgents:
  host: analyst-agents
  port: 9090

serviceAccount:
  create: true
  name: mcp-tool-catalog

serviceMonitor:
  enabled: true

podDisruptionBudget:
  minAvailable: 1

networkPolicy:
  enabled: true
  ingress:
    - from:
        - namespaceSelector:
            matchLabels:
              name: istio-system
        - namespaceSelector:
            matchLabels:
              name: monitoring
        - podSelector:
            matchLabels:
              neural-hive-mind.org/mcp-access: "enabled"
  egress:
    - to:
        - namespaceSelector:
            matchLabels:
              name: kafka
      ports:
        - protocol: TCP
          port: 9092
    - to:
        - namespaceSelector:
            matchLabels:
              name: mongodb
      ports:
        - protocol: TCP
          port: 27017
    - to:
        - namespaceSelector:
            matchLabels:
              name: redis
      ports:
        - protocol: TCP
          port: 6379
    - to:
        - podSelector:
            matchLabels:
              app.kubernetes.io/name: service-registry
      ports:
        - protocol: TCP
          port: 8080
    - to:
        - podSelector:
            matchLabels:
              app.kubernetes.io/name: analyst-agents
      ports:
        - protocol: TCP
          port: 9090
    - to: []  # DNS
      ports:
        - protocol: UDP
          port: 53
