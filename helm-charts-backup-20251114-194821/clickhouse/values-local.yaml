# ClickHouse Local Values - Optimized for Minikube
# Override default values.yaml settings for local development

# Operator Configuration
operator:
  install: true
  namespace: clickhouse-operator

# Cluster Configuration
cluster:
  name: neural-hive-clickhouse-local
  namespace: clickhouse-cluster
  version: "23.8"
  shards: 1  # Single shard for local (instead of 3)
  replicas: 1  # Single replica per shard

# ZooKeeper/Keeper Configuration
zookeeper:
  enabled: true
  nodes: 1  # Single ZooKeeper node for local
  storage:
    size: 5Gi  # Reduced from 10Gi
    storageClass: standard

# Storage Configuration
storage:
  size: 10Gi  # Reduced from 100Gi
  storageClass: standard

# Resource Configuration
resources:
  requests:
    cpu: 200m
    memory: 1Gi
  limits:
    cpu: 1
    memory: 2Gi

# ZooKeeper Resources
zookeeperResources:
  requests:
    cpu: 100m
    memory: 256Mi
  limits:
    cpu: 500m
    memory: 512Mi

# ClickHouse Configuration
config:
  compression: ZSTD(3)
  maxMemoryUsage: 2Gi  # Reduced from 10Gi
  maxThreads: 4  # Reduced from 8
  queryLogEnabled: true
  ttlDays: 30  # Reduced retention for local

# Users Configuration
users:
  admin:
    password: "local_admin_password"
  readonly:
    password: "local_readonly_password"
  writer:
    password: "local_writer_password"

# Security Configuration
security:
  tls:
    enabled: false  # Disable TLS for local

# Backup Configuration
backup:
  enabled: false

# Metrics Configuration
metrics:
  enabled: true
  serviceMonitor:
    enabled: false

# Environment
environment: local

# Network Policy
networkPolicy:
  enabled: false

# Istio
istio:
  injection: false
