# Valores padrão para Neo4j Helm Chart - Neural Hive-Mind

nameOverride: ""
fullnameOverride: ""

# Configuração do Neo4j
neo4j:
  install: true
  name: neural-hive-neo4j
  namespace: neo4j-cluster
  edition: community  # ou enterprise
  acceptLicenseAgreement: "no"  # "yes" se enterprise

# Cluster
cluster:
  mode: CORE  # Cluster causal
  coreServers: 3
  readReplicas: 2

# Image
image:
  repository: neo4j
  tag: 5.15.0-community
  pullPolicy: IfNotPresent

# Storage
storage:
  core:
    size: 50Gi
    storageClass: gp3-ssd
  replica:
    size: 30Gi
    storageClass: gp3-ssd

# Resources
resources:
  core:
    requests:
      cpu: 500m
      memory: 2Gi
    limits:
      cpu: 2
      memory: 8Gi
  replica:
    requests:
      cpu: 300m
      memory: 1.5Gi
    limits:
      cpu: 1.5
      memory: 6Gi

# Config
config:
  heap:
    initial: 2G
    max: 4G
  pagecache: 2G
  dbms:
    default_listen_address: 0.0.0.0
    connector:
      bolt:
        enabled: true
      http:
        enabled: true
    security:
      auth_enabled: true
    logs:
      query:
        enabled: true

# Plugins
plugins:
  apoc: true
  graphDataScience: true
  neosemantics: true

# Security
security:
  auth:
    enabled: true
    existingSecret: ""
    password: ""  # Fornecido via values override
  ssl:
    bolt:
      enabled: true
    https:
      enabled: true

# Backup
backup:
  enabled: true
  schedule: "0 3 * * *"
  retention: 7
  storage:
    size: 100Gi

# Metrics
metrics:
  enabled: true
  port: 2004
  serviceMonitor:
    enabled: true
    interval: 30s
    scrapeTimeout: 10s
    namespace: neo4j-cluster

# Services
services:
  bolt:
    port: 7687
    type: ClusterIP
  http:
    port: 7474
    type: ClusterIP
  https:
    port: 7473
    type: ClusterIP
  metrics:
    port: 2004
    type: ClusterIP

# Pod Annotations e Labels
podAnnotations:
  prometheus.io/scrape: "true"
  prometheus.io/port: "2004"
  prometheus.io/path: "/metrics"

podLabels:
  app.kubernetes.io/name: neo4j
  app.kubernetes.io/component: graph-database
  neural-hive.io/layer: knowledge
  neural-hive.io/component: semantic-graph

# Affinity
affinity:
  podAntiAffinity:
    preferredDuringSchedulingIgnoredDuringExecution:
      - weight: 100
        podAffinityTerm:
          labelSelector:
            matchExpressions:
              - key: app.kubernetes.io/name
                operator: In
                values:
                  - neo4j
          topologyKey: topology.kubernetes.io/zone

# Tolerations
tolerations: []

# Node Selector
nodeSelector: {}

# Istio
istio:
  injection: true

# Environment
environment: prod

# RBAC
rbac:
  create: true

# Network Policy
networkPolicy:
  enabled: true
  ingress:
    - from:
        - namespaceSelector:
            matchLabels:
              name: neural-hive-observability
      ports:
        - protocol: TCP
          port: 2004
    - from:
        - namespaceSelector:
            matchLabels:
              neural-hive.io/layer: cognitive
      ports:
        - protocol: TCP
          port: 7687
        - protocol: TCP
          port: 7474

# Configurações por ambiente
dev:
  cluster:
    coreServers: 3
    readReplicas: 1
  storage:
    core:
      size: 20Gi
    replica:
      size: 10Gi
  resources:
    core:
      requests:
        cpu: 500m
        memory: 2Gi
      limits:
        cpu: 2
        memory: 8Gi
  backup:
    enabled: false
  security:
    ssl:
      bolt:
        enabled: false
      https:
        enabled: false

staging:
  cluster:
    coreServers: 3
    readReplicas: 2
  storage:
    core:
      size: 50Gi
    replica:
      size: 30Gi

prod:
  cluster:
    coreServers: 3
    readReplicas: 2
  storage:
    core:
      size: 100Gi
    replica:
      size: 50Gi
  backup:
    enabled: true
