# PeerAuthentication global para mTLS STRICT
apiVersion: security.istio.io/v1beta1
kind: PeerAuthentication
metadata:
  name: default
  namespace: istio-system
  labels:
    app: istio-peer-authentication
    neuralhive/component: security
    neuralhive/phase: foundation
spec:
  # Aplicar mTLS STRICT para toda a mesh
  mtls:
    mode: STRICT

---
# PeerAuthentication espec√≠fica para namespaces do Neural Hive-Mind
{{- range $namespace := list "neural-hive-cognition" "neural-hive-orchestration" "neural-hive-execution" "neural-hive-observability" }}
apiVersion: security.istio.io/v1beta1
kind: PeerAuthentication
metadata:
  name: neural-hive-strict
  namespace: {{ $namespace }}
  labels:
    app: neural-hive-peer-authentication
    neuralhive/component: security
    neuralhive/namespace: {{ $namespace }}
spec:
  mtls:
    mode: STRICT
---
{{- end }}