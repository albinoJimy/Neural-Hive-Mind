apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "specialist-business.fullname" . }}-config
  labels:
    {{- include "specialist-business.labels" . | nindent 4 }}
data:
  specialist_type: "business"
  specialist_version: {{ .Chart.AppVersion | quote }}
  environment: {{ .Values.config.environment | quote }}
  log_level: {{ .Values.config.logLevel | quote }}
  enable_jwt_auth: {{ .Values.config.enableJwtAuth | default "true" | quote }}

  mlflow_experiment_name: {{ .Values.config.mlflow.experimentName | quote }}
  mlflow_model_name: {{ .Values.config.mlflow.modelName | quote }}
  mlflow_model_stage: {{ .Values.config.mlflow.modelStage | quote }}

  mongodb_opinions_collection: {{ .Values.config.mongodb.opinionsCollection | quote }}
  redis_cache_ttl: {{ .Values.config.redis.cacheTtl | quote }}

  grpc_max_workers: {{ .Values.config.grpc.maxWorkers | quote }}
  grpc_max_message_length: {{ .Values.config.grpc.maxMessageLength | quote }}

  min_confidence_score: {{ .Values.config.thresholds.minConfidenceScore | quote }}
  high_risk_threshold: {{ .Values.config.thresholds.highRiskThreshold | quote }}

  evaluation_timeout_ms: {{ .Values.config.timeouts.evaluationMs | quote }}
  model_inference_timeout_ms: {{ .Values.config.timeouts.modelInferenceMs | quote }}

  enable_explainability: {{ .Values.config.features.enableExplainability | quote }}
  enable_caching: {{ .Values.config.features.enableCaching | quote }}
  enable_model_monitoring: {{ .Values.config.features.enableModelMonitoring | quote }}

  process_mining_enabled: {{ .Values.config.business.processMiningEnabled | quote }}
  cost_analysis_enabled: {{ .Values.config.business.costAnalysisEnabled | quote }}
  kpi_threshold_high: {{ .Values.config.business.kpiThresholdHigh | quote }}
  kpi_threshold_low: {{ .Values.config.business.kpiThresholdLow | quote }}

  # Performance Optimization Configuration
  feature_cache_enabled: {{ .Values.config.featureCacheEnabled | quote }}
  feature_cache_ttl_seconds: {{ .Values.config.featureCacheTtlSeconds | quote }}
  enable_batch_inference: {{ .Values.config.enableBatchInference | quote }}
  batch_inference_size: {{ .Values.config.batchInferenceSize | quote }}
  batch_inference_max_workers: {{ .Values.config.batchInferenceMaxWorkers | quote }}
  enable_gpu_acceleration: {{ .Values.config.enableGpuAcceleration | quote }}
  gpu_device: {{ .Values.config.gpuDevice | quote }}
