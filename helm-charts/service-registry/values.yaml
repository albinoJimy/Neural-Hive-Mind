image:
  repository: service-registry
  tag: 1.0.0
  pullPolicy: IfNotPresent

replicaCount: 2

autoscaling:
  enabled: true
  minReplicas: 2
  maxReplicas: 6
  targetCPUUtilizationPercentage: 70
  targetMemoryUtilizationPercentage: 80

resources:
  requests:
    cpu: 250m
    memory: 512Mi
  limits:
    cpu: 1000m
    memory: 2Gi

service:
  type: ClusterIP
  grpcPort: 50051
  metricsPort: 9090

config:
  serviceName: service-registry
  serviceVersion: 1.0.0
  environment: production
  logLevel: INFO
  etcd:
    endpoints:
      - http://etcd:2379
    prefix: /neural-hive/agents
    timeoutSeconds: 5
  healthCheck:
    intervalSeconds: 60
  heartbeat:
    timeoutSeconds: 120
  redis:
    clusterNodes:
      - redis:6379
    password: ""
  otel:
    exporterEndpoint: http://otel-collector:4317

istio:
  enabled: true
  mtls:
    mode: STRICT

serviceMonitor:
  enabled: true
  interval: 30s
  scrapeTimeout: 10s

podDisruptionBudget:
  enabled: true
  minAvailable: 1

networkPolicy:
  enabled: true
  ingress:
    - from:
        - namespaceSelector:
            matchLabels:
              name: neural-hive-mind
        - namespaceSelector:
            matchLabels:
              name: neural-hive-orchestration
  egress:
    - to:
        - namespaceSelector:
            matchLabels:
              name: infrastructure
      ports:
        - protocol: TCP
          port: 2379  # etcd
        - protocol: TCP
          port: 6379  # redis
    - to:
        - namespaceSelector:
            matchLabels:
              name: observability
      ports:
        - protocol: TCP
          port: 4317  # otel-collector

podAnnotations:
  prometheus.io/scrape: "true"
  prometheus.io/port: "9090"
  prometheus.io/path: "/metrics"

podLabels:
  app.kubernetes.io/name: service-registry
  app.kubernetes.io/component: coordination
  app.kubernetes.io/part-of: neural-hive-mind

affinity:
  podAntiAffinity:
    preferredDuringSchedulingIgnoredDuringExecution:
      - weight: 100
        podAffinityTerm:
          labelSelector:
            matchExpressions:
              - key: app.kubernetes.io/name
                operator: In
                values:
                  - service-registry
          topologyKey: kubernetes.io/hostname

serviceAccount:
  create: true
  name: service-registry
  automountServiceAccountToken: true
