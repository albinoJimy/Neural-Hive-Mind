# Docker Registry Configuration
replicaCount: 1

image:
  repository: registry
  tag: "2.8.3"
  pullPolicy: IfNotPresent

# Service configuration
service:
  type: NodePort
  port: 5000
  nodePort: 30500

# Persistence configuration
persistence:
  enabled: true
  storageClass: ""  # Use default storage class
  size: 50Gi
  accessMode: ReadWriteOnce

# Storage S3 (desabilitado por padr達o)
storage:
  s3:
    enabled: false
    region: us-east-1
    bucket: ""
    encrypt: true
    secure: true
    v4auth: true

# Redis cache (desabilitado por padr達o)
redis:
  enabled: false
  host: redis-registry.registry.svc.cluster.local
  port: 6379
  db: 0
  pool:
    maxIdle: 16
    maxActive: 64
    idleTimeout: 300s

# Docker Hub proxy (desabilitado por padr達o)
proxy:
  enabled: false
  remoteurl: https://registry-1.docker.io
  username: ""
  password: ""
  ttl: 168h

# Resource limits
resources:
  requests:
    memory: "256Mi"
    cpu: "100m"
  limits:
    memory: "512Mi"
    cpu: "500m"

# Node selector - run on control plane
nodeSelector:
  node-role.kubernetes.io/control-plane: ""

# Tolerations for control plane
tolerations:
  - key: "node-role.kubernetes.io/control-plane"
    operator: "Exists"
    effect: "NoSchedule"

# Affinity (vazio por padr達o)
affinity: {}

# Registry configuration
config:
  # Storage configuration
  storage:
    delete:
      enabled: true
    cache:
      blobdescriptor: inmemory
  # HTTP configuration
  http:
    addr: ":5000"
    headers:
      X-Content-Type-Options: [nosniff]
  # Health check
  health:
    storagedriver:
      enabled: true
      interval: 10s
      threshold: 3

# Garbage collection cronjob
gc:
  enabled: true
  schedule: "0 2 * * 0"  # Every Sunday at 2am
