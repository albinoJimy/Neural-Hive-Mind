component: "scout-agents"
layer: "exploration"

image:
  repository: 37.60.241.150:30500/scout-agents
  tag: "1.2.0"
  pullPolicy: IfNotPresent
  pullSecrets: []

replicaCount: 2

service:
  type: ClusterIP
  ports:
    http:
      port: 8000
      targetPort: 8000
      protocol: TCP
    metrics:
      port: 9090
      targetPort: 9090
      protocol: TCP

config:
  service:
    name: scout-agents
    version: "1.0.0"
    environment: dev
    logLevel: INFO

  kafka:
    bootstrapServers: neural-hive-kafka-kafka-bootstrap.kafka.svc.cluster.local:9092
    consumerGroupId: scout-agents-dev
    topics:
      signals: exploration-signals
      opportunities: exploration-opportunities
    security:
      enableSasl: false
      saslMechanism: PLAIN
      enableSsl: false

  serviceRegistry:
    host: service-registry.neural-hive-services.svc.cluster.local
    port: 50051
    registrationInterval: 300
    heartbeatInterval: 30
    capabilities:
      agent_type: scout
      exploration_domains:
        - BUSINESS
        - TECHNICAL
      channel_types:
        - CORE
        - WEB
        - API
      max_signals_per_minute: 100

  memoryLayer:
    apiUrl: http://memory-layer-api.neural-hive-services.svc.cluster.local:8000
    timeout: 30
    retryAttempts: 3

  pheromone:
    enabled: true
    ttl: 3600
    decayRate: 0.15
    redisKeyPrefix: "pheromone:exploration:"

  detection:
    curiosityThreshold: 0.6
    confidenceThreshold: 0.7
    relevanceThreshold: 0.5
    riskThreshold: 0.8
    maxSignalsPerMinute: 100

  observability:
    prometheusPort: 9090
    httpPort: 8000
    tracingEnabled: true
    otelEndpoint: http://otel-collector:4317

resources:
  requests:
    cpu: 400m      # Solution exploration
    memory: 768Mi
  limits:
    cpu: 1500m
    memory: 2Gi

autoscaling:
  enabled: true
  minReplicas: 2
  maxReplicas: 10
  targetCPU: 70
  targetMemory: 80

podDisruptionBudget:
  enabled: true
  minAvailable: 1

serviceMonitor:
  enabled: true
  interval: 30s
  scrapeTimeout: 10s

networkPolicy:
  enabled: true

securityContext:
  runAsNonRoot: true
  runAsUser: 1000
  fsGroup: 1000

deployment:
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 0

observability:
  prometheus:
    enabled: true

istio:
  enabled: true

podSecurityContext:
  runAsNonRoot: true
  runAsUser: 1000
  fsGroup: 1000

startupProbe:
  httpGet:
    path: /health/live
    port: http
  initialDelaySeconds: 10
  periodSeconds: 10
  timeoutSeconds: 5
  failureThreshold: 18
  successThreshold: 1

livenessProbe:
  httpGet:
    path: /health/live
    port: http
  initialDelaySeconds: 0
  periodSeconds: 10
  timeoutSeconds: 5
  failureThreshold: 3

readinessProbe:
  httpGet:
    path: /health/ready
    port: http
  initialDelaySeconds: 10
  periodSeconds: 5
  timeoutSeconds: 3
  failureThreshold: 3

nodeSelector: {}

tolerations: []

affinity:
  podAntiAffinity:
    preferredDuringSchedulingIgnoredDuringExecution:
      - weight: 100
        podAffinityTerm:
          labelSelector:
            matchLabels:
              app.kubernetes.io/name: scout-agents
          topologyKey: kubernetes.io/hostname

topologySpreadConstraints:
  - maxSkew: 1
    topologyKey: topology.kubernetes.io/zone
    whenUnsatisfiable: ScheduleAnyway
    labelSelector:
      matchLabels:
        app.kubernetes.io/name: scout-agents
