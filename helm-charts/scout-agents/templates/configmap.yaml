apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "scout-agents.fullname" . }}
  labels:
    {{- include "scout-agents.labels" . | nindent 4 }}
data:
  SERVICE__SERVICE_NAME: {{ .Values.config.service.name | quote }}
  SERVICE__VERSION: {{ .Values.config.service.version | quote }}
  SERVICE__ENVIRONMENT: {{ .Values.config.service.environment | quote }}
  SERVICE__LOG_LEVEL: {{ .Values.config.service.logLevel | quote }}

  KAFKA__BOOTSTRAP_SERVERS: {{ .Values.config.kafka.bootstrapServers | quote }}
  KAFKA__CONSUMER_GROUP_ID: {{ .Values.config.kafka.consumerGroupId | quote }}
  KAFKA__TOPICS_SIGNALS: {{ .Values.config.kafka.topics.signals | quote }}
  KAFKA__TOPICS_OPPORTUNITIES: {{ .Values.config.kafka.topics.opportunities | quote }}
  KAFKA__ENABLE_SASL: {{ .Values.config.kafka.security.enableSasl | quote }}
  KAFKA__SASL_MECHANISM: {{ .Values.config.kafka.security.saslMechanism | quote }}
  KAFKA__ENABLE_SSL: {{ .Values.config.kafka.security.enableSsl | quote }}

  SERVICE_REGISTRY__HOST: {{ .Values.config.serviceRegistry.host | quote }}
  SERVICE_REGISTRY__PORT: {{ .Values.config.serviceRegistry.port | quote }}
  SERVICE_REGISTRY__REGISTRATION_INTERVAL: {{ .Values.config.serviceRegistry.registrationInterval | quote }}
  SERVICE_REGISTRY__HEARTBEAT_INTERVAL: {{ .Values.config.serviceRegistry.heartbeatInterval | quote }}

  MEMORY_LAYER__API_URL: {{ .Values.config.memoryLayer.apiUrl | quote }}
  MEMORY_LAYER__TIMEOUT: {{ .Values.config.memoryLayer.timeout | quote }}
  MEMORY_LAYER__RETRY_ATTEMPTS: {{ .Values.config.memoryLayer.retryAttempts | quote }}

  PHEROMONE__ENABLED: {{ .Values.config.pheromone.enabled | quote }}
  PHEROMONE__TTL: {{ .Values.config.pheromone.ttl | quote }}
  PHEROMONE__DECAY_RATE: {{ .Values.config.pheromone.decayRate | quote }}
  PHEROMONE__REDIS_KEY_PREFIX: {{ .Values.config.pheromone.redisKeyPrefix | quote }}

  DETECTION__CURIOSITY_THRESHOLD: {{ .Values.config.detection.curiosityThreshold | quote }}
  DETECTION__CONFIDENCE_THRESHOLD: {{ .Values.config.detection.confidenceThreshold | quote }}
  DETECTION__RELEVANCE_THRESHOLD: {{ .Values.config.detection.relevanceThreshold | quote }}
  DETECTION__RISK_THRESHOLD: {{ .Values.config.detection.riskThreshold | quote }}
  DETECTION__MAX_SIGNALS_PER_MINUTE: {{ .Values.config.detection.maxSignalsPerMinute | quote }}

  OBSERVABILITY__PROMETHEUS_PORT: {{ .Values.config.observability.prometheusPort | quote }}
  OBSERVABILITY__HTTP_PORT: {{ .Values.config.observability.httpPort | quote }}
  OBSERVABILITY__TRACING_ENABLED: {{ .Values.config.observability.tracingEnabled | quote }}
  OTEL_EXPORTER_OTLP_ENDPOINT: {{ .Values.config.observability.otelEndpoint | quote }}
