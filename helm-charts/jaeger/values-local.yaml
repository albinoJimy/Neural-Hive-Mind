# Configuração para ambiente local (Minikube/Kind)
# All-in-one deployment com storage in-memory

global:
  domain: neural-hive.local
  environment: development

# Deployment strategy (all-in-one para local)
allInOne:
  enabled: true
  replicaCount: 1

  # Recursos reduzidos
  resources:
    limits:
      cpu: 500m
      memory: 1Gi
    requests:
      cpu: 250m
      memory: 512Mi

  # Ports
  service:
    type: ClusterIP
    ports:
      - name: grpc
        port: 14250
        targetPort: 14250
      - name: http
        port: 14268
        targetPort: 14268
      - name: admin
        port: 14269
        targetPort: 14269
      - name: otlp-grpc
        port: 4317
        targetPort: 4317
      - name: otlp-http
        port: 4318
        targetPort: 4318
      - name: ui
        port: 16686
        targetPort: 16686

  # Environment variables
  extraEnv:
    - name: COLLECTOR_OTLP_ENABLED
      value: "true"
    - name: METRICS_STORAGE_TYPE
      value: prometheus

  # Args
  args:
    - "--memory.max-traces=10000"
    - "--collector.otlp.grpc.host-port=0.0.0.0:4317"
    - "--collector.otlp.http.host-port=0.0.0.0:4318"
    - "--query.base-path=/"

  # Health checks
  livenessProbe:
    httpGet:
      path: /
      port: 14269
    initialDelaySeconds: 30
    periodSeconds: 10

  readinessProbe:
    httpGet:
      path: /
      port: 14269
    initialDelaySeconds: 5
    periodSeconds: 5

# Desabilitar componentes separados (production)
collector:
  enabled: false

query:
  enabled: false

agent:
  enabled: false

# Storage (memory para local)
storage:
  type: memory

# Sampling strategies
sampling:
  strategies: |
    {
      "default_strategy": {
        "type": "probabilistic",
        "param": 1.0
      },
      "service_strategies": [
        {
          "service": "semantic-translation-engine",
          "type": "probabilistic",
          "param": 1.0
        },
        {
          "service": "consensus-engine",
          "type": "probabilistic",
          "param": 1.0
        },
        {
          "service": "gateway-intencoes",
          "type": "probabilistic",
          "param": 1.0
        },
        {
          "service": "specialist-business",
          "type": "probabilistic",
          "param": 1.0
        },
        {
          "service": "specialist-technical",
          "type": "probabilistic",
          "param": 1.0
        },
        {
          "service": "specialist-behavior",
          "type": "probabilistic",
          "param": 1.0
        },
        {
          "service": "specialist-evolution",
          "type": "probabilistic",
          "param": 1.0
        },
        {
          "service": "specialist-architecture",
          "type": "probabilistic",
          "param": 1.0
        }
      ],
      "max_traces_per_second": 1000
    }

# UI Configuration
query:
  uiConfig:
    config: |
      {
        "monitor": {
          "menuEnabled": true
        },
        "dependencies": {
          "menuEnabled": true
        },
        "archiveEnabled": false,
        "tracking": {
          "gaID": null
        },
        "linkPatterns": []
      }

# ServiceMonitor
serviceMonitor:
  enabled: true
  interval: 30s
  additionalLabels:
    neural.hive/component: distributed-tracing
    neural.hive/metrics: "enabled"

# Ingress (desabilitado para local)
ingress:
  enabled: false
