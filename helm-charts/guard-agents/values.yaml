image:
  repository: neural-hive/guard-agents
  tag: 1.0.0
  pullPolicy: IfNotPresent

replicaCount: 2

autoscaling:
  enabled: true
  minReplicas: 2
  maxReplicas: 10
  targetCPUUtilizationPercentage: 70
  targetMemoryUtilizationPercentage: 80

resources:
  requests:
    cpu: 500m
    memory: 512Mi
  limits:
    cpu: 1000m
    memory: 1Gi

config:
  serviceName: guard-agents
  namespace: neural-hive-resilience

  kafka:
    bootstrapServers: kafka-bootstrap.kafka.svc.cluster.local:9092
    incidentsTopic: security-incidents
    orchestrationIncidentsTopic: orchestration-incidents
    remediationTopic: remediation-actions
    consumerGroupId: guard-agents

  serviceRegistry:
    host: service-registry.neural-hive-registry.svc.cluster.local
    port: 50051
    heartbeatIntervalSeconds: 30
    capabilities:
      - threat-detection
      - policy-enforcement
      - incident-classification
      - auto-remediation

  mongodb:
    uri: mongodb://mongodb.neural-hive-persistence.svc.cluster.local:27017
    database: neural_hive
    incidentsCollection: security_incidents
    remediationCollection: remediation_actions

  redis:
    host: redis.neural-hive-persistence.svc.cluster.local
    port: 6379
    db: 0

  prometheus:
    url: http://prometheus.observability.svc.cluster.local:9090
    queryTimeoutSeconds: 10

  alertmanager:
    url: http://alertmanager.observability.svc.cluster.local:9093
    webhookEnabled: true

  kubernetes:
    inCluster: true
    namespace: neural-hive-resilience

  selfHealingEngine:
    url: http://self-healing-engine:8080
    grpcHost: self-healing-engine
    grpcPort: 50051

  detection:
    mttdTargetSeconds: 15
    mttrTargetSeconds: 90
    anomalyThreshold: 0.8
    falsePositiveThreshold: 0.05

  enforcement:
    opaEnabled: true
    istioEnabled: true
    autoRemediationEnabled: true
    manualApprovalRequiredForCritical: true

  observability:
    otelEndpoint: http://otel-collector:4317
    prometheusPort: 9090
    httpPort: 8080
    grpcPort: 50051
    logLevel: INFO

service:
  type: ClusterIP
  ports:
    http: 8080
    grpc: 50051
    metrics: 9090

securityContext:
  runAsNonRoot: true
  runAsUser: 1000
  fsGroup: 1000

serviceAccount:
  create: true
  annotations: {}

rbac:
  create: true

istio:
  enabled: true
  mtls:
    mode: STRICT

serviceMonitor:
  enabled: true
  interval: 30s

podDisruptionBudget:
  enabled: true
  minAvailable: 1

affinity:
  podAntiAffinity:
    preferredDuringSchedulingIgnoredDuringExecution:
      - weight: 100
        podAffinityTerm:
          labelSelector:
            matchExpressions:
              - key: app
                operator: In
                values:
                  - guard-agents
          topologyKey: kubernetes.io/hostname

tolerations: []

nodeSelector: {}

networkPolicy:
  enabled: true

secrets:
  mongodbPassword: ""
  redisPassword: ""
  kafkaSaslUsername: ""
  kafkaSaslPassword: ""
