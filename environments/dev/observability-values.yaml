# Configura√ß√µes de observabilidade para ambiente de desenvolvimento
# Recursos reduzidos, retention menor, sampling aumentado para debugging

global:
  domain: dev.neural-hive.local
  environment: development

# OpenTelemetry Collector - configura√ß√µes para desenvolvimento
otelCollector:
  resources:
    limits:
      cpu: 500m
      memory: 1Gi
    requests:
      cpu: 250m
      memory: 512Mi

  config:
    processors:
      tail_sampling:
        policies:
        - name: dev_sampling
          type: probabilistic
          probabilistic:
            sampling_percentage: 100  # 100% para debugging

# Prometheus - configura√ß√µes reduzidas para dev
prometheus:
  prometheus:
    prometheusSpec:
      replicas: 1
      retention: 7d  # 7 dias para dev
      retentionSize: 20GB

      storageSpec:
        volumeClaimTemplate:
          spec:
            resources:
              requests:
                storage: 30Gi  # Reduzido para dev

      resources:
        limits:
          cpu: 1000m
          memory: 4Gi
        requests:
          cpu: 500m
          memory: 2Gi

  # AlertManager - configura√ß√£o simplificada
  alertmanager:
    alertmanagerSpec:
      replicas: 1  # Single replica para dev

      resources:
        limits:
          cpu: 250m
          memory: 512Mi
        requests:
          cpu: 100m
          memory: 256Mi

      config:
        route:
          group_wait: 1s  # Resposta r√°pida para testes
          group_interval: 5s
          repeat_interval: 5m  # Repetir mais frequentemente para testes

        receivers:
        - name: 'dev-alerts'
          slack_configs:
          - api_url: 'https://hooks.slack.com/services/DEV/WEBHOOK'
            channel: '#neural-hive-dev'
            title: 'üöß DEV Alert: Neural Hive-Mind'
            text: |
              **Environment**: Development
              **Alert**: {{ .GroupLabels.alertname }}
              {{ range .Alerts }}
              **Summary**: {{ .Annotations.summary }}
              {{ end }}

# Grafana - configura√ß√£o de desenvolvimento
grafana:
  replicas: 1

  resources:
    limits:
      cpu: 500m
      memory: 1Gi
    requests:
      cpu: 250m
      memory: 512Mi

  persistence:
    size: 5Gi  # Reduzido para dev

  # Plugins b√°sicos para desenvolvimento
  plugins:
  - grafana-piechart-panel
  - grafana-clock-panel
  - natel-discrete-panel

  grafana.ini:
    server:
      domain: grafana.dev.neural-hive.local
      root_url: https://grafana.dev.neural-hive.local

    analytics:
      reporting_enabled: false
      check_for_updates: false

    log:
      level: debug  # Debug para desenvolvimento

    feature_toggles:
      enable: "alertingPreview,live"  # Features b√°sicas

# Jaeger - configura√ß√£o de desenvolvimento
jaeger:
  strategy: allInOne  # All-in-one para simplicidade

  allInOne:
    replicas: 1

    resources:
      limits:
        cpu: 500m
        memory: 1Gi
      requests:
        cpu: 250m
        memory: 512Mi

  storage:
    type: memory  # In-memory para dev (dados n√£o persistem)

  sampling:
    default_strategy:
      type: probabilistic
      param: 1.0  # 100% sampling para debugging

# Configura√ß√µes espec√≠ficas de desenvolvimento
development:
  # Logging mais verboso
  logLevel: debug

  # Health checks mais frequentes
  healthCheck:
    interval: 10s
    timeout: 5s

  # M√©tricas com maior resolu√ß√£o
  metrics:
    scrapeInterval: 10s
    evaluationInterval: 10s

  # Alertas relaxados para evitar spam durante desenvolvimento
  alerts:
    enabled: true
    thresholds:
      # SLOs relaxados para desenvolvimento
      availability: 0.95  # 95% ao inv√©s de 99.9%
      latency: 0.5        # 500ms ao inv√©s de 150ms
      error_rate: 0.1     # 10% ao inv√©s de 1%

# Network policies relaxadas para desenvolvimento
networkPolicy:
  enabled: false  # Desabilitado para facilitar testes

# Backup desabilitado para desenvolvimento
backup:
  enabled: false

# Configura√ß√µes de teste
testing:
  # Dados de teste para dashboards
  testData:
    enabled: true

  # Mock services para simular componentes
  mockServices:
    enabled: true
    services:
    - name: mock-gateway
      port: 8080
    - name: mock-planner
      port: 8081