# ============================================================================
# Orchestrator Dynamic - Environment Configuration Template
# ============================================================================
# IMPORTANTE: Este arquivo e um TEMPLATE. Copie para .env e ajuste os valores.
# NUNCA commite o arquivo .env com credenciais reais no Git.
# ============================================================================

# Application
ENVIRONMENT=development  # development | staging | production
SERVICE_NAME=orchestrator-dynamic
SERVICE_VERSION=1.0.0
LOG_LEVEL=INFO

# Temporal Workflow Engine
TEMPORAL_ENABLED=true
TEMPORAL_HOST=temporal-frontend.temporal.svc.cluster.local
TEMPORAL_PORT=7233
TEMPORAL_NAMESPACE=default
TEMPORAL_TASK_QUEUE=orchestration-tasks
TEMPORAL_TLS_ENABLED=false

# Kafka
KAFKA_BOOTSTRAP_SERVERS=neural-hive-kafka-kafka-bootstrap.kafka.svc.cluster.local:9092
KAFKA_CONSUMER_GROUP_ID=orchestrator-dynamic
KAFKA_CONSENSUS_TOPIC=plans.consensus
KAFKA_TICKETS_TOPIC=execution.tickets
KAFKA_SECURITY_PROTOCOL=PLAINTEXT
KAFKA_SCHEMA_REGISTRY_URL=http://schema-registry.kafka.svc.cluster.local:8081

# PostgreSQL (Temporal State Store)
POSTGRES_HOST=pgbouncer-temporal.temporal-postgres.svc.cluster.local
POSTGRES_PORT=6432
POSTGRES_DATABASE=temporal
POSTGRES_USER=temporal
POSTGRES_PASSWORD=CHANGEME_SECURE_PASSWORD  # Use External Secrets em producao
POSTGRES_SSL_MODE=require

# MongoDB (Auditoria)
MONGODB_URI=mongodb://root:CHANGEME_SECURE_PASSWORD@mongodb.mongodb-cluster.svc.cluster.local:27017/neural_hive?authSource=admin
MONGODB_DATABASE=neural_hive_orchestration
MONGODB_MAX_POOL_SIZE=100
MONGODB_MIN_POOL_SIZE=10

# Redis (Cache)
REDIS_CLUSTER_NODES=neural-hive-cache.redis-cluster.svc.cluster.local:6379
REDIS_PASSWORD=CHANGEME_SECURE_PASSWORD  # Override para vazio apenas em DEV local. OBRIGATORIO em producao.
REDIS_SSL_ENABLED=false

# Service Registry
SERVICE_REGISTRY_HOST=service-registry.neural-hive-execution.svc.cluster.local
SERVICE_REGISTRY_PORT=50051

# Scheduler
ENABLE_INTELLIGENT_SCHEDULER=true
ENABLE_ML_ENHANCED_SCHEDULING=false
SCHEDULER_MAX_PARALLEL_TICKETS=100

# ML Predictions
ML_PREDICTIONS_ENABLED=true
MLFLOW_TRACKING_URI=http://mlflow.mlflow:5000
ML_DRIFT_DETECTION_ENABLED=true

# SLA Management
SLA_DEFAULT_TIMEOUT_MS=3600000
SLA_CHECK_INTERVAL_SECONDS=30
SLA_ALERT_THRESHOLD_PERCENT=0.8

# Vault Integration
# CRITICO: Em producao, VAULT_FAIL_OPEN deve ser false (fail-closed)
VAULT_ENABLED=false
VAULT_ADDRESS=http://vault.vault.svc.cluster.local:8200
VAULT_AUTH_METHOD=kubernetes
VAULT_KUBERNETES_ROLE=orchestrator-dynamic
VAULT_FAIL_OPEN=false  # Fail-closed por padrao. Override para true apenas em DEV local.

# SPIFFE/SPIRE Integration
SPIFFE_ENABLED=false
SPIFFE_SOCKET_PATH=unix:///run/spire/sockets/agent.sock
SPIFFE_TRUST_DOMAIN=neural-hive.local
SPIFFE_FALLBACK_ALLOWED=false

# Observability
OTEL_EXPORTER_ENDPOINT=http://otel-collector:4317
PROMETHEUS_PORT=9090

# OPA Policy Engine
OPA_ENABLED=true
OPA_HOST=opa.neural-hive-orchestration.svc.cluster.local
OPA_PORT=8181
OPA_FAIL_OPEN=false

# Circuit Breaker
CIRCUIT_BREAKER_ENABLED=true
CIRCUIT_BREAKER_FAIL_MAX=5
CIRCUIT_BREAKER_TIMEOUT=60

# ============================================================================
# NOTAS DE SEGURANCA PARA PRODUCAO
# ============================================================================
# 1. VAULT_FAIL_OPEN=false - Obrigatorio em producao (validacao automatica)
# 2. REDIS_PASSWORD - Obrigatorio em producao (validacao automatica)
# 3. Use External Secrets Operator ou Sealed Secrets para gerenciar credenciais
# 4. Consulte docs/SECRETS_MANAGEMENT_GUIDE.md para melhores praticas
# 5. Nunca use senhas padrao como "changeme" ou "password" em producao
# ============================================================================
