apiVersion: neural-hive.io/v1
kind: SLODefinition
metadata:
  name: gateway-availability-slo
  namespace: neural-hive-gateway
  labels:
    app.kubernetes.io/name: gateway-intencoes
    neural-hive.io/layer: gateway
    neural-hive.io/slo-type: availability
spec:
  name: "Gateway de Intenções - Availability"
  description: "Gateway deve estar disponível 99.9% do tempo"
  sloType: AVAILABILITY
  serviceName: gateway-intencoes
  component: api
  layer: gateway
  target: 0.999  # 99.9% availability
  windowDays: 30
  sliQuery:
    metricName: up
    query: |
      avg_over_time(up{
        job="gateway-intencoes",
        namespace="neural-hive-gateway"
      }[5m])
    aggregation: avg
    labels:
      service: gateway-intencoes
      layer: gateway
  enabled: true
  metadata:
    owner: neural-hive-team
    severity: critical
    runbook: https://docs.neural-hive.io/runbooks/gateway-availability
    pagerduty_integration: neural-hive-critical
